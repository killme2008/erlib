A config server for notify

mnesia
upgrades/degrades


protocol:

Request header

  Byte/     0       |       1       |       2       |       3       |
        /              |               |               |               |
       |0 1 2 3 4 5 6 7|0 1 2 3 4 5 6 7|0 1 2 3 4 5 6 7|0 1 2 3 4 5 6 7|
       +---------------+---------------+---------------+---------------+
      0| Magic         | Opcode        | dataId length                 |
       +---------------+---------------+---------------+---------------+
      4| datanumId length              | Reserved                      |
       +---------------+---------------+---------------+---------------+
      8| body length                                             |
       +---------------+---------------+---------------+---------------+
     12| Opaque                                                        |
       +---------------+---------------+---------------+---------------+
     16| body                                                          |
       |                                                               |
       +---------------+---------------+---------------+---------------+

  Response header

  Byte/     0       |       1       |       2       |       3       |
        /              |               |               |               |
       |0 1 2 3 4 5 6 7|0 1 2 3 4 5 6 7|0 1 2 3 4 5 6 7|0 1 2 3 4 5 6 7|
       +---------------+---------------+---------------+---------------+
      0| Magic         | Opcode        | dataId length                 |
       +---------------+---------------+---------------+---------------+
      4| datanumId length              | status                      |
       +---------------+---------------+---------------+---------------+
      8| body length                                             |
       +---------------+---------------+---------------+---------------+
     12| Opaque                                                        |
       +---------------+---------------+---------------+---------------+
     16| body                                                          |
       |                                                               |
       +---------------+---------------+---------------+---------------+


     big end

     magic:  uint8
     length: uint16
     status: uint16
     opcode: uint8

     magic:
     
     request 0x80
     response 0x81

     opcode:
     
     0x00 get
     0x01 set
     0x02 notify
     0x03 heartbeat

     status:

   0x0000  No error
   0x0001  store fail
   0x0002  Key not found
   0x0003  Invalid arguments










